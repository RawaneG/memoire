# üìö OWID Predictor - Documentation Compl√®te

## üéØ Vue d'Ensemble

OWID Predictor est une application web moderne de pr√©diction COVID-19 utilisant l'intelligence artificielle et des mod√®les d'apprentissage automatique. L'interface utilisateur prim√©e combine des animations fluides avec des visualisations de donn√©es interactives, sp√©cialement optimis√©e pour le S√©n√©gal.

### üèóÔ∏è Architecture du Syst√®me

```
OWID Predictor/
‚îú‚îÄ‚îÄ frontend/          # Interface utilisateur React
‚îú‚îÄ‚îÄ backend/           # API Flask avec mod√®les ML
‚îî‚îÄ‚îÄ documentation/     # Guides et r√©f√©rences
```

## üé® Frontend - Interface Utilisateur

### üìã Pr√©requis

- **Node.js** 16.0 ou sup√©rieur
- **npm** ou **yarn**
- Navigateur moderne (Chrome 90+, Firefox 88+, Safari 14+)

### üöÄ Installation Rapide

```bash
# Naviguer vers le dossier frontend
cd frontend

# Installer les d√©pendances
npm install

# D√©marrer le serveur de d√©veloppement
npm start

# Construire pour la production
npm run build
```

### üé≠ Technologies Utilis√©es

| Technologie       | Version  | Usage                     |
| ----------------- | -------- | ------------------------- |
| **React**         | 18.2.0   | Framework UI principal    |
| **Framer Motion** | 10.16.16 | Animations et transitions |
| **Tailwind CSS**  | 3.3.6    | Styles et mise en page    |
| **Recharts**      | 2.8.0    | Visualisation de donn√©es  |
| **Lucide React**  | 0.294.0  | Ic√¥nes modernes           |

### üé® Syst√®me de Design

#### **Palette de Couleurs**

```css
/* Couleurs Principales */
--primary-blue: #0ea5e9    /* Bleu principal */
--primary-purple: #8b5cf6  /* Violet accent */
--success-green: #10b981   /* Vert succ√®s */
--warning-orange: #f59e0b  /* Orange avertissement */
--error-red: #ef4444       /* Rouge erreur */

/* Nuances de Gris */
--gray-50: #fafafa
--gray-800: #262626
--gray-900: #171717
```

#### **Typographie**

```css
/* Police Principale */
font-family: "Inter", system-ui, sans-serif;

/* Poids Disponibles */
font-weight: 300, 400, 500, 600, 700, 800, 900;

/* Police Monospace */
font-family: "JetBrains Mono", Monaco, Consolas, monospace;
```

### üß© Structure des Composants

#### **Composants Principaux**

1. **App.js** - Composant racine de l'application

   ```jsx
   // G√®re l'√©tat global et la logique principale
   const [country, setCountry] = useState("Senegal");
   const [model, setModel] = useState("random_forest");
   const [predictions, setPredictions] = useState(null);
   ```

2. **BackgroundElements.jsx** - Effets visuels d'arri√®re-plan

   ```jsx
   // Particules flottantes et d√©grad√©s anim√©s
   - 20 particules anim√©es
   - Grille de fond subtile
   - Orbes lumineux avec blend modes
   ```

3. **CountrySelector.jsx** - S√©lecteur de pays avanc√©

   ```jsx
   // Fonctionnalit√©s
   - Recherche en temps r√©el
   - Pays vedettes (S√©n√©gal, France, Allemagne)
   - Badges de recommandation
   - Animations de dropdown
   ```

4. **ModelSelector.jsx** - S√©lection de mod√®les ML

   ```jsx
   // Types de mod√®les
   - R√©gression Lin√©aire (rapide, simple)
   - For√™t Al√©atoire (robuste, pr√©cis)
   - Gradient Boosting (haute pr√©cision)
   ```

5. **PredictionChart.jsx** - Visualisation des donn√©es
   ```jsx
   // Caract√©ristiques du graphique
   - Courbes interactives avec Recharts
   - Intervalles de confiance
   - Tooltips personnalis√©s
   - Statistiques r√©sum√©es
   ```

#### **Hooks Personnalis√©s**

**useApi.js** - Gestion des appels API

```javascript
const { loading, error, predict, getCountries } = useApi();

// Fonctions disponibles
-predict(country, model, horizon) - getCountries() - getModels() - getHealth();
```

### üé¨ Animations et Interactions

#### **Framer Motion Variants**

```javascript
// Animation d'entr√©e
const containerVariants = {
  hidden: { opacity: 0 },
  visible: {
    opacity: 1,
    transition: { staggerChildren: 0.1 },
  },
};

// Animation d'√©l√©ments
const itemVariants = {
  hidden: { y: 20, opacity: 0 },
  visible: { y: 0, opacity: 1 },
};
```

#### **Classes CSS Personnalis√©es**

```css
/* Morphisme de verre */
.glass-morphism {
  background: rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 255, 255, 0.3);
}

/* Bouton principal */
.button-primary {
  background: linear-gradient(135deg, #0ea5e9, #8b5cf6);
  transition: all 0.3s ease;
}

.button-primary:hover {
  transform: scale(1.05);
  box-shadow: 0 20px 40px rgba(14, 165, 233, 0.4);
}
```

### üì± Responsive Design

#### **Points de Rupture**

```css
/* Mobile */
@media (max-width: 768px) {
  .card-primary {
    padding: 1.5rem;
  }
  .text-5xl {
    font-size: 2.5rem;
  }
}

/* Tablette */
@media (min-width: 769px) and (max-width: 1024px) {
  .grid-cols-3 {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* Desktop */
@media (min-width: 1025px) {
  .grid-cols-3 {
    grid-template-columns: repeat(3, 1fr);
  }
}
```

### üîß Configuration et Personnalisation

#### **Tailwind Configuration**

```javascript
// tailwind.config.js
module.exports = {
  theme: {
    extend: {
      fontFamily: {
        inter: ["Inter", "system-ui", "sans-serif"],
      },
      colors: {
        primary: {
          500: "#0ea5e9",
          600: "#0284c7",
        },
      },
      animation: {
        "gradient-x": "gradient-x 3s ease infinite",
        float: "float 6s ease-in-out infinite",
      },
    },
  },
};
```

#### **Variables d'Environnement**

```bash
# .env
REACT_APP_API_URL=http://localhost:5001
REACT_APP_VERSION=2.0.0
REACT_APP_ENVIRONMENT=development
```

---

## üñ•Ô∏è Backend - API et Mod√®les ML

### üìã Pr√©requis

- **Python** 3.8 ou sup√©rieur
- **pip** gestionnaire de paquets
- **Flask** framework web
- (Optionnel) **Apache Spark** pour les gros datasets

### üöÄ Installation Rapide

```bash
# Naviguer vers le dossier backend
cd backend

# Cr√©er un environnement virtuel
python -m venv venv

# Activer l'environnement (Windows)
venv\Scripts\activate

# Activer l'environnement (Mac/Linux)
source venv/bin/activate

# Installer les d√©pendances
pip install -r requirements.txt

# D√©marrer le serveur
python simple_app.py
```

### üèóÔ∏è Structure du Backend

```
backend/
‚îú‚îÄ‚îÄ app.py                    # API Flask principale (avec Spark)
‚îú‚îÄ‚îÄ simple_app.py            # API simple sans Spark
‚îú‚îÄ‚îÄ spark_model.py           # Mod√®les ML avec Spark
‚îú‚îÄ‚îÄ requirements.txt         # D√©pendances Python
‚îú‚îÄ‚îÄ owid-covid-data-sample.csv # Donn√©es d'exemple
‚îî‚îÄ‚îÄ README.md               # Documentation backend
```

### üîå Endpoints de l'API

#### **1. Sant√© du Service**

```http
GET /health

R√©ponse:
{
  "status": "healthy",
  "service": "OWID COVID-19 Prediction API",
  "version": "2.0-simple",
  "features": ["multi-model", "country-specific", "senegal-optimized"]
}
```

#### **2. Liste des Pays**

```http
GET /countries

R√©ponse:
{
  "total_countries": 9,
  "featured_countries": [
    {
      "name": "Senegal",
      "has_special_config": true,
      "config": {
        "population_density_threshold": 83,
        "optimization": "Random Forest recommended"
      }
    }
  ],
  "other_countries": [...]
}
```

#### **3. Mod√®les Disponibles**

```http
GET /models

R√©ponse:
{
  "available_models": {
    "linear": {
      "name": "R√©gression Lin√©aire",
      "description": "Mod√®le lin√©aire simple",
      "complexity": "Low",
      "accuracy": "Medium",
      "speed": "Fast"
    }
  },
  "recommended_by_country": {
    "Senegal": "random_forest"
  }
}
```

#### **4. G√©n√©ration de Pr√©dictions**

```http
GET /predict?country=Senegal&model=random_forest&horizon=14

Param√®tres:
- country: Nom du pays (requis)
- model: Type de mod√®le (linear, random_forest, gradient_boost)
- horizon: Nombre de jours √† pr√©dire (1-30)

R√©ponse:
{
  "country": "Senegal",
  "model_type": "random_forest",
  "horizon_days": 14,
  "training_samples": 1249,
  "test_samples": 342,
  "features_used": ["cases_lag_1", "cases_lag_7", ...],
  "metrics": {
    "rmse": 17.5,
    "mae": 15.2,
    "r2_score": 0.881
  },
  "predictions": [
    {
      "date": "2025-08-28",
      "prediction": 261
    }
  ]
}
```

### ü§ñ Mod√®les d'Apprentissage Automatique

#### **1. R√©gression Lin√©aire**

```python
# Caract√©ristiques
- Complexit√©: Faible
- Pr√©cision: Moyenne
- Vitesse: Rapide
- Usage: Tendances lin√©aires simples

# Configuration
LinearRegression(
    featuresCol="features",
    labelCol="new_cases",
    maxIter=100,
    regParam=0.01
)
```

#### **2. For√™t Al√©atoire**

```python
# Caract√©ristiques
- Complexit√©: Moyenne
- Pr√©cision: √âlev√©e
- Vitesse: Moyenne
- Usage: Relations non-lin√©aires

# Configuration
RandomForestRegressor(
    featuresCol="features",
    labelCol="new_cases",
    numTrees=100,
    maxDepth=10,
    seed=42
)
```

#### **3. Gradient Boosting**

```python
# Caract√©ristiques
- Complexit√©: √âlev√©e
- Pr√©cision: Tr√®s √©lev√©e
- Vitesse: Lente
- Usage: Pr√©dictions haute pr√©cision

# Configuration
GBTRegressor(
    featuresCol="features",
    labelCol="new_cases",
    maxIter=100,
    maxDepth=6,
    seed=42
)
```

### üåç Configuration Sp√©cifique par Pays

#### **S√©n√©gal (Optimis√©)**

```python
COUNTRY_CONFIGS = {
    'Senegal': {
        'population_density_threshold': 83,  # hab/km¬≤
        'gdp_per_capita_range': (1000, 2000),  # USD
        'vaccination_lag': 30,  # jours
        'seasonal_factor': True,
        'recommended_model': 'random_forest'
    }
}
```

### üîí S√©curit√© et CORS

#### **Configuration CORS**

```python
@app.after_request
def after_request(response):
    response.headers.add('Access-Control-Allow-Origin', '*')
    response.headers.add('Access-Control-Allow-Headers', 'Content-Type,Authorization')
    response.headers.add('Access-Control-Allow-Methods', 'GET,PUT,POST,DELETE,OPTIONS')
    return response
```

#### **Gestion des Erreurs**

```python
try:
    result = predict_cases(country, model, horizon)
    return jsonify(result)
except ValueError as ve:
    logger.error(f"Erreur de validation: {str(ve)}")
    return jsonify({'error': str(ve)}), 400
except Exception as exc:
    logger.error(f"Erreur interne: {str(exc)}")
    return jsonify({'error': 'Erreur interne du serveur'}), 500
```

---

## üöÄ Guide de D√©ploiement

### üîß D√©veloppement Local

#### **√âtape 1: Pr√©parer l'Environnement**

```bash
# Cloner le projet
git clone <votre-repo>
cd OWID-Predictor

# Installer les d√©pendances backend
cd backend
python -m venv venv
venv\Scripts\activate  # Windows
pip install -r requirements.txt

# Installer les d√©pendances frontend
cd ../frontend
npm install
```

#### **√âtape 2: Lancer les Serveurs**

```bash
# Terminal 1: Backend
cd backend
python simple_app.py
# ‚Üí http://localhost:5001

# Terminal 2: Frontend
cd frontend
npm start
# ‚Üí http://localhost:3000
```

### üåê D√©ploiement Production

#### **Frontend (Vercel - Recommand√©)**

```bash
# Construire l'application
npm run build

# D√©ployer avec Vercel
npx vercel --prod

# Configuration vercel.json
{
  "builds": [
    {
      "src": "package.json",
      "use": "@vercel/static-build",
      "config": { "distDir": "build" }
    }
  ]
}
```

#### **Backend (Heroku)**

```bash
# Cr√©er Procfile
echo "web: python simple_app.py" > Procfile

# D√©ployer
heroku create owid-predictor-api
git push heroku main

# Variables d'environnement
heroku config:set FLASK_ENV=production
heroku config:set PORT=5000
```

#### **Docker (M√©thode Alternative)**

```dockerfile
# Dockerfile pour le backend
FROM python:3.9-slim
WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY . .
EXPOSE 5001
CMD ["python", "simple_app.py"]

# Dockerfile pour le frontend
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm ci --only=production
COPY . .
RUN npm run build
EXPOSE 3000
CMD ["npx", "serve", "-s", "build"]
```

---

## üß™ Tests et Qualit√©

### ‚úÖ Tests Frontend

#### **Tests Unitaires**

```bash
# Lancer les tests
npm test

# Tests avec couverture
npm test -- --coverage

# Tests en mode watch
npm test -- --watch
```

#### **Tests d'Int√©gration**

```javascript
// Exemple de test composant
import { render, screen } from "@testing-library/react";
import CountrySelector from "../components/CountrySelector";

test("affiche le s√©lecteur de pays", () => {
  render(<CountrySelector value="Senegal" onChange={jest.fn()} />);
  expect(screen.getByText("Senegal")).toBeInTheDocument();
});
```

### üîç Tests Backend

#### **Tests API**

```bash
# Tester les endpoints
curl -X GET "http://localhost:5001/health"
curl -X GET "http://localhost:5001/countries"
curl -X GET "http://localhost:5001/predict?country=Senegal&model=random_forest&horizon=7"
```

#### **Tests Python**

```python
# test_api.py
import unittest
from simple_app import app

class APITestCase(unittest.TestCase):
    def setUp(self):
        self.app = app.test_client()

    def test_health_endpoint(self):
        response = self.app.get('/health')
        self.assertEqual(response.status_code, 200)
        self.assertIn(b'healthy', response.data)

if __name__ == '__main__':
    unittest.main()
```

### üìä M√©triques de Performance

#### **Objectifs Frontend**

- ‚ö° **First Contentful Paint**: < 1.5s
- üéØ **Largest Contentful Paint**: < 2.5s
- üöÄ **Time to Interactive**: < 3.5s
- üìê **Cumulative Layout Shift**: < 0.1

#### **M√©triques Backend**

- üî• **Temps de r√©ponse API**: < 200ms
- üíæ **Utilisation m√©moire**: < 512MB
- ‚öôÔ∏è **Charge CPU**: < 70%

---

## üêõ D√©pannage

### üîß Probl√®mes Courants

#### **Frontend**

**1. Erreurs CORS**

```bash
# V√©rifier que le backend est sur le bon port
Backend: http://localhost:5001 ‚úì
Frontend: http://localhost:3000 ‚úì

# Red√©marrer les deux serveurs
```

**2. Styles Tailwind non appliqu√©s**

```bash
# V√©rifier postcss.config.js
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}

# R√©installer les d√©pendances
npm install
```

**3. Animations Framer Motion saccad√©es**

```javascript
// Optimiser les animations
const variants = {
  animate: {
    transition: { duration: 0.3, ease: "easeOut" },
  },
};
```

#### **Backend**

**1. Erreur Port Occup√©**

```bash
# Changer le port
python -c "from simple_app import app; app.run(port=5002)"

# Ou tuer le processus
netstat -ano | findstr :5001
taskkill /PID <PID> /F
```

**2. Erreur Modules Python**

```bash
# R√©installer l'environnement virtuel
deactivate
rm -rf venv
python -m venv venv
venv\Scripts\activate
pip install -r requirements.txt
```

**3. Donn√©es Manquantes**

```python
# Le fichier simple_app.py g√©n√®re des donn√©es de d√©mo
# Pas besoin de fichier CSV externe
```

### üìû Support et Communaut√©

#### **Ressources Utiles**

- üìö **Documentation React**: https://reactjs.org/docs
- üé® **Framer Motion**: https://framer.com/motion
- üé® **Tailwind CSS**: https://tailwindcss.com/docs
- ‚ö° **Flask Documentation**: https://flask.palletsprojects.com

#### **Contact et Contribution**

```bash
# Signaler un bug
Issues: https://github.com/votre-repo/issues

# Contribuer au code
1. Fork le projet
2. Cr√©er une branche feature
3. Commit les modifications
4. Push vers la branche
5. Ouvrir une Pull Request
```
